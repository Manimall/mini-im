import {useCallback} from 'react'
import {useSelector, useDispatch} from 'react-redux'
import * as R from 'ramda'

import {LoadMorePhonesStart} from 'modules/LoadMorePhones'


const useLoadMorePhones = () => {
  const dispatch = useDispatch();

  const { phonesPage } = useSelector((state) => ({
    phonesPage: state.phonesPage,
  }));

  const getRenderedPhonesLength = useCallback(() => R.length(phonesPage.ids), [phonesPage.ids]);

  return useCallback(() => {
    dispatch(LoadMorePhonesStart(getRenderedPhonesLength(phonesPage)));
  }, [dispatch, getRenderedPhonesLength, phonesPage]);
}

export default useLoadMorePhones
