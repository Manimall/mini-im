import {useCallback} from 'react'
import {useSelector, useDispatch} from 'react-redux'
import * as R from 'ramda'

import {LoadMorePhonesStart} from 'modules/LoadMorePhones'


const useLoadMorePhones = () => {
  const dispatch = useDispatch();

  const { ids } = useSelector((state) => ({
    ids: state.phonesPage.ids,
  }));

  const getRenderedPhonesLength = useCallback(() => R.length(ids), [ids]);

  const loadMorePhones = useCallback(() => {
    dispatch(LoadMorePhonesStart(getRenderedPhonesLength()));
  }, [dispatch, getRenderedPhonesLength]);

  return {
    ids,
    loadMorePhones,
  }
}

export default useLoadMorePhones
