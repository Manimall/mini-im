import * as R from 'ramda'
import { handleActions } from 'redux-actions'

import {FetchCategoriesStart, FetchCategoriesSuccess, FetchCategoriesFailure} from './actions'

const initialState = {};

export default handleActions({
  [FetchCategoriesStart]: (state, _action) => (
    R.mergeRight(state, {
      isLoading: true,
      err: false,
    })
  ),

  [FetchCategoriesSuccess]: (state, { payload }) => {
    const values = R.indexBy(R.prop('id'), payload);

    return R.mergeRight(state, {
      isLoading: false,
      err: false,
      values
    })
  },

  [FetchCategoriesFailure]: (state, { payload }) => (
    R.mergeRight(state, {
      isLoading: false,
      err: true,
      error: payload,
    })
  ),

}, initialState);
