import * as R from 'ramda'
import { handleActions } from 'redux-actions'

import {FetchPhonesSuccess} from 'modules/Phones'
import {LoadMorePhonesSuccess} from 'modules/LoadMorePhones'

const initialState = {
  ids: [],
};

const phonesPageReducer = handleActions({
  [FetchPhonesSuccess]: (state, { payload }) => (
    R.mergeRight(state, {
      ids: R.pluck('id', payload), // equivalent to R.map(R.prop(k), f)
    })
  ),

  [LoadMorePhonesSuccess]: (state, { payload }) => {
    const newIds = R.pluck('id', payload);

    return R.mergeRight(state, {
      ids: R.concat(newIds, state.ids)
    });
  },


}, initialState);

export { phonesPageReducer };
